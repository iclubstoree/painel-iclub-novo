<!DOCTYPE html>
<html>
<head>
  <title>Painel Administrativo</title>
</head>
<body>
  <h2>Login</h2>
  <input id="user" placeholder="Usuário" />
  <input id="pass" type="password" placeholder="Senha" />
  <button onclick="login()">Entrar</button>

  <div id="painel" style="display:none;">
    <h3>Painel Administrativo</h3>
    <input type="file" id="csv" />
    <button onclick="enviar()">Enviar Planilha</button>
    <pre id="resultado"></pre>
  </div>

  <script>
    function login() {
      const user = document.getElementById('user').value;
      const pass = document.getElementById('pass').value;
      if (user === "admin" && pass === "1234") {
        document.querySelector('h2').style.display = 'none';
        document.getElementById('user').style.display = 'none';
        document.getElementById('pass').style.display = 'none';
        document.querySelector('button').style.display = 'none';
        document.getElementById('painel').style.display = 'block';
      } else {
        alert("Login inválido.");
      }
    }

    async function enviar() {
      const file = document.getElementById('csv').files[0];
      const form = new FormData();
      form.append("file", file);
      const res = await fetch("/api/upload", {
        method: "POST",
        body: file
      });
      const text = await res.text();
      document.getElementById('resultado').innerText = "Resposta do servidor: " + text;
    }
  </script>
</body>
</html>